{# partials/_topbar.html #}
{% if request.user.is_authenticated and request.resolver_match and request.resolver_match.url_name != 'login' %}
  <div class="d-flex align-items-center gap-2 gap-lg-3">
    <span class="navbar-text d-none d-md-inline">Logged in as</span>
    <span class="fw-semibold">{{ request.user.get_short_name|default:request.user.username }}</span>

    {# Optional Account link (only if the route exists) #}
    {% url 'account' as account_url %}
    {% if account_url %}
      <a class="nav-link px-2 d-none d-sm-inline" href="{{ account_url }}">Account</a>
    {% endif %}

    <form method="post" action="{% url 'logout' %}" class="m-0">
      {% csrf_token %}
      <button class="btn btn-outline-secondary btn-sm">Logout</button>
    </form>
  </div>
{% endif %}

